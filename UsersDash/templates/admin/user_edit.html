{% extends "base.html" %}

{% if is_new %}
    {% set page_title = "Создание пользователя" %}
{% else %}
    {% set page_title = "Редактирование пользователя: " ~ user.username %}
{% endif %}

{% block title %}{{ page_title }}{% endblock %}

{% block content %}
<h1>{{ page_title }}</h1>

<div class="card">
    <form method="post">
        <label class="form-label">
            Логин
            <input type="text" name="username" class="form-input"
                   value="{{ user.username if user else '' }}" required>
        </label>

        <label class="form-label">
            Роль
            <select name="role" class="form-input">
                <option value="client" {% if user and user.role == "client" %}selected{% endif %}>Клиент</option>
                <option value="admin" {% if user and user.role == "admin" %}selected{% endif %}>Админ</option>
            </select>
        </label>

        <label class="form-label form-label-inline">
            <input type="checkbox" name="is_active" {% if not user or user.is_active %}checked{% endif %}>
            Активен
        </label>

        {% if is_new %}
            <label class="form-label">
                Пароль
                <input type="password" name="password" class="form-input" required>
            </label>
        {% else %}
            <label class="form-label">
                Новый пароль (если нужно сменить)
                <input type="password" name="new_password" class="form-input" placeholder="Оставьте пустым, чтобы не менять">
            </label>
        {% endif %}

        <button type="submit" class="btn btn-primary">
            Сохранить
        </button>
        <a href="{{ url_for('admin.users_list') }}" class="btn btn-outline">Отмена</a>
    </form>
</div>
{% endblock %}
